/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package quanlysinhvien;

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.Iterator;
import javax.swing.JOptionPane;
import static javax.swing.JOptionPane.INFORMATION_MESSAGE;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author huy4205
 */
public class QuanLyThongTin extends javax.swing.JFrame {

    private DefaultTableModel tableModel;
    ArrayList<SinhVien> dsSinhVien = new ArrayList<>();
    int bienHienTai = 0;
    int searching = 0;
    boolean timKiem = false;

    /**
     * Creates new form QuanLyThongTin
     */
    public QuanLyThongTin() {
        initComponents();
        tableModel = new DefaultTableModel();
        setLocationRelativeTo(null);
        tableModel.addColumn("MãSV");
        tableModel.addColumn("Họ tên");
        tableModel.addColumn("Tiếng anh");
        tableModel.addColumn("Tin học");
        tableModel.addColumn("GDTC");
        tableModel.addColumn("Điểm TB");
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        buttonGroup2 = new javax.swing.ButtonGroup();
        jPanel1 = new javax.swing.JPanel();
        lblQLDSV = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        txtMaSVSEARCH = new javax.swing.JTextField();
        btnSearch = new javax.swing.JButton();
        jLabel2 = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        lblHoTen = new javax.swing.JLabel();
        txtHoTen = new javax.swing.JTextField();
        lblMaSinhVien = new javax.swing.JLabel();
        txtMaSinhVien = new javax.swing.JTextField();
        lblTiengAnh = new javax.swing.JLabel();
        txtTiengAnh = new javax.swing.JTextField();
        lblTinHoc = new javax.swing.JLabel();
        txtTinHoc = new javax.swing.JTextField();
        lblGiaoDucTC = new javax.swing.JLabel();
        txtGiaoDucTC = new javax.swing.JTextField();
        jPanel4 = new javax.swing.JPanel();
        jLabel8 = new javax.swing.JLabel();
        txtDiemTB = new javax.swing.JTextField();
        btnNew = new javax.swing.JButton();
        btnSave = new javax.swing.JButton();
        btnDelete = new javax.swing.JButton();
        btnUpdate = new javax.swing.JButton();
        btnTien1 = new javax.swing.JButton();
        btnLui2 = new javax.swing.JButton();
        btnTien2 = new javax.swing.JButton();
        btnLui1 = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        tbeBang = new javax.swing.JTable();
        jLabel3 = new javax.swing.JLabel();
        btnDanhSach = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Quản Lý Điểm Sinh Viên");

        lblQLDSV.setFont(new java.awt.Font("Helvetica Neue", 1, 18)); // NOI18N
        lblQLDSV.setForeground(new java.awt.Color(0, 0, 255));
        lblQLDSV.setText("QUẢN LÝ ĐIỂM SINH VIÊN");

        jPanel2.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        jLabel1.setText("Mã sv:");

        btnSearch.setIcon(new javax.swing.ImageIcon("/Users/huy4205/Downloads/Gakuseisean-Ivista-2-Start-Menu-Search.16.png")); // NOI18N
        btnSearch.setText("Search");
        btnSearch.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnSearch.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSearchActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(txtMaSVSEARCH, javax.swing.GroupLayout.PREFERRED_SIZE, 199, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(30, 30, 30)
                .addComponent(btnSearch, javax.swing.GroupLayout.PREFERRED_SIZE, 72, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(23, Short.MAX_VALUE))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(17, 17, 17)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(txtMaSVSEARCH, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnSearch, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(15, Short.MAX_VALUE))
        );

        jLabel2.setFont(new java.awt.Font("Helvetica Neue", 1, 13)); // NOI18N
        jLabel2.setText("Tìm Kiếm");

        jPanel3.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        lblHoTen.setText("Họ và tên:");

        lblMaSinhVien.setText("Mã sinh viên:");

        lblTiengAnh.setText("Tiếng anh:");

        lblTinHoc.setText("Tin học:");

        lblGiaoDucTC.setText("Giáo dục TC");

        jLabel8.setText("Điểm TB");

        txtDiemTB.setEditable(false);
        txtDiemTB.setFont(new java.awt.Font("Helvetica Neue", 1, 14)); // NOI18N
        txtDiemTB.setForeground(new java.awt.Color(51, 51, 255));
        txtDiemTB.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(txtDiemTB, javax.swing.GroupLayout.PREFERRED_SIZE, 214, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel8))
                .addContainerGap(58, Short.MAX_VALUE))
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel8, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(txtDiemTB, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(12, 12, 12)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addGroup(jPanel3Layout.createSequentialGroup()
                                    .addComponent(lblGiaoDucTC)
                                    .addGap(18, 18, 18)
                                    .addComponent(txtGiaoDucTC))
                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                                    .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                                            .addComponent(lblTiengAnh)
                                            .addGap(30, 30, 30))
                                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                                            .addComponent(lblTinHoc)
                                            .addGap(44, 44, 44))
                                        .addGroup(jPanel3Layout.createSequentialGroup()
                                            .addComponent(lblHoTen)
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)))
                                    .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                        .addComponent(txtTiengAnh)
                                        .addComponent(txtTinHoc, javax.swing.GroupLayout.PREFERRED_SIZE, 123, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(txtHoTen, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 122, javax.swing.GroupLayout.PREFERRED_SIZE))))
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addComponent(lblMaSinhVien)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(txtMaSinhVien, javax.swing.GroupLayout.PREFERRED_SIZE, 123, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(29, Short.MAX_VALUE))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGap(26, 26, 26)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblMaSinhVien)
                    .addComponent(txtMaSinhVien, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(lblHoTen)
                    .addComponent(txtHoTen, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(lblTiengAnh)
                    .addComponent(txtTiengAnh, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblTinHoc)
                    .addComponent(txtTinHoc, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblGiaoDucTC)
                    .addComponent(txtGiaoDucTC, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(44, Short.MAX_VALUE))
        );

        btnNew.setIcon(new javax.swing.ImageIcon("/Users/huy4205/Downloads/Awicons-Vista-Artistic-Add.24.png")); // NOI18N
        btnNew.setText("New");
        btnNew.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnNew.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNewActionPerformed(evt);
            }
        });

        btnSave.setIcon(new javax.swing.ImageIcon("/Users/huy4205/Downloads/Oxygen-Icons.org-Oxygen-Actions-document-save.24.png")); // NOI18N
        btnSave.setText("Save");
        btnSave.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSaveActionPerformed(evt);
            }
        });

        btnDelete.setIcon(new javax.swing.ImageIcon("/Users/huy4205/Downloads/Awicons-Vista-Artistic-Delete.24.png")); // NOI18N
        btnDelete.setText("Delete");
        btnDelete.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnDelete.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDeleteActionPerformed(evt);
            }
        });

        btnUpdate.setIcon(new javax.swing.ImageIcon("/Users/huy4205/Downloads/Custom-Icon-Design-Pretty-Office-9-Edit-validated.24.png")); // NOI18N
        btnUpdate.setText("Update");
        btnUpdate.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnUpdate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnUpdateActionPerformed(evt);
            }
        });

        btnTien1.setIcon(new javax.swing.ImageIcon("/Users/huy4205/Documents/Lập Trình Java 2/Oxygen-Icons.org-Oxygen-Actions-arrow-right.32.png")); // NOI18N
        btnTien1.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnTien1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTien1ActionPerformed(evt);
            }
        });

        btnLui2.setIcon(new javax.swing.ImageIcon("/Users/huy4205/Documents/Lập Trình Java 2/Oxygen-Icons.org-Oxygen-Actions-arrow-left-double.32.png")); // NOI18N
        btnLui2.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnLui2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLui2ActionPerformed(evt);
            }
        });

        btnTien2.setIcon(new javax.swing.ImageIcon("/Users/huy4205/Documents/Lập Trình Java 2/Oxygen-Icons.org-Oxygen-Actions-arrow-right-double.32.png")); // NOI18N
        btnTien2.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnTien2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTien2ActionPerformed(evt);
            }
        });

        btnLui1.setIcon(new javax.swing.ImageIcon("/Users/huy4205/Documents/Lập Trình Java 2/Oxygen-Icons.org-Oxygen-Actions-arrow-left.32.png")); // NOI18N
        btnLui1.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnLui1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLui1ActionPerformed(evt);
            }
        });

        tbeBang.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null}
            },
            new String [] {
                "MãSV", "Họ Tên", "Tiếng anh", "Tin học", "GDTC", "Điểm TB"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane1.setViewportView(tbeBang);

        jLabel3.setForeground(new java.awt.Color(0, 102, 255));
        jLabel3.setText("Top 3 sinh viên có điểm cao nhất:");

        btnDanhSach.setIcon(new javax.swing.ImageIcon("/Users/huy4205/Documents/Lập Trình Java 2/Pictogrammers-Material-Light-Table.24.png")); // NOI18N
        btnDanhSach.setText("Danh sách");
        btnDanhSach.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnDanhSach.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDanhSachActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(lblQLDSV, javax.swing.GroupLayout.PREFERRED_SIZE, 255, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(137, 137, 137))
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane1)
                .addContainerGap())
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(62, 62, 62)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel2)
                            .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(25, 25, 25)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(29, 29, 29)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addComponent(btnUpdate, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(btnDelete, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(btnSave, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(btnNew, javax.swing.GroupLayout.PREFERRED_SIZE, 101, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(btnDanhSach, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(btnLui2)
                                .addGap(18, 18, 18)
                                .addComponent(btnLui1)
                                .addGap(18, 18, 18)
                                .addComponent(btnTien1)
                                .addGap(18, 18, 18)
                                .addComponent(btnTien2))))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jLabel3)))
                .addContainerGap(64, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(12, 12, 12)
                .addComponent(lblQLDSV)
                .addGap(18, 18, 18)
                .addComponent(jLabel2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(btnTien1)
                            .addComponent(btnLui2, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(btnTien2, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(btnLui1)))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(22, 22, 22)
                        .addComponent(btnNew)
                        .addGap(18, 18, 18)
                        .addComponent(btnSave)
                        .addGap(18, 18, 18)
                        .addComponent(btnDelete)
                        .addGap(18, 18, 18)
                        .addComponent(btnUpdate)
                        .addGap(18, 18, 18)
                        .addComponent(btnDanhSach)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jLabel3)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 177, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>                        

    private void btnNewActionPerformed(java.awt.event.ActionEvent evt) {                                       
        String a = "";
        txtMaSinhVien.setText(a);
        txtHoTen.setText(a);
        txtTiengAnh.setText(a);
        txtTinHoc.setText(a);
        txtGiaoDucTC.setText(a);
        txtDiemTB.setText(a);
    }                                      

    private void btnSearchActionPerformed(java.awt.event.ActionEvent evt) {                                          
        this.Search();
        timKiem = true;
    }                                         

    private void btnSaveActionPerformed(java.awt.event.ActionEvent evt) {                                        
        this.nhapThongTin();
    }                                       

    private void btnDeleteActionPerformed(java.awt.event.ActionEvent evt) {                                          
        this.deLete();
        this.ghiFile(dsSinhVien);
    }                                         

    private void btnUpdateActionPerformed(java.awt.event.ActionEvent evt) {                                          
        this.update();
        this.ghiFile(dsSinhVien);
    }                                         

    private void btnDanhSachActionPerformed(java.awt.event.ActionEvent evt) {                                            
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                BangThongTin t = new BangThongTin();
                t.setVisible(true);
            }
        });

    }                                           

    private void btnLui2ActionPerformed(java.awt.event.ActionEvent evt) {                                        
        if (!dsSinhVien.isEmpty()) {
            if (timKiem) {
                searching = 0;
                zzz(searching);
            } else {
                bienHienTai = 0;
                zzz(bienHienTai);
            }
        } else {
            JOptionPane.showMessageDialog(this, "Danh sách sinh viên đang rỗng", "Thông báo", JOptionPane.INFORMATION_MESSAGE);
        }
    }                                       

    private void btnLui1ActionPerformed(java.awt.event.ActionEvent evt) {                                        
        if (timKiem) {
            searching--;
            if (searching < 0) {
                searching = dsSinhVien.size() - 1;
            }
            zzz(searching);
        } else {
            bienHienTai--;
            if (bienHienTai < 0) {
                bienHienTai = dsSinhVien.size() - 1;
            }
            zzz(bienHienTai);
        }
    }                                       

    private void btnTien2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        if (!dsSinhVien.isEmpty()) {
            if (timKiem) {
                searching = dsSinhVien.size() - 1;
                zzz(searching);
            } else {
                bienHienTai = dsSinhVien.size() - 1;
                zzz(bienHienTai);
            }
        } else {
            JOptionPane.showMessageDialog(this, "Danh sách sinh viên đang rỗng", "Thông báo", JOptionPane.INFORMATION_MESSAGE);
        }
    }                                        

    private void btnTien1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        if (timKiem) {
            searching++;
            if (searching >= dsSinhVien.size()) {
                searching = 0;
            }
            zzz(searching);
        } else {
            bienHienTai++;
            if (bienHienTai >= dsSinhVien.size()) {
                bienHienTai = 0;
            }
            zzz(bienHienTai);
        }
    }                                        

    public void fillToTable() {
        ArrayList<SinhVien> dsSinhVienCopy = new ArrayList<>(dsSinhVien);
        Collections.sort(dsSinhVienCopy, new Comparator<SinhVien>() {
            @Override
            public int compare(SinhVien sv1, SinhVien sv2) {
                return Float.compare(sv2.diemTrungBinh(), sv1.diemTrungBinh());
            }
        });
        ArrayList<SinhVien> top3SinhVien = new ArrayList<>();
        for (int i = 0; i < Math.min(3, dsSinhVienCopy.size()); i++) {
            top3SinhVien.add(dsSinhVienCopy.get(i));
        }
        String[] headers = {"MãSV", "Họ tên", "Tiếng anh", "Tin học", "GDTC", "Điểm TB"};
        DefaultTableModel model = new DefaultTableModel(headers, 0);
        for (SinhVien s : top3SinhVien) {
            Object[] row = new Object[]{
                s.getMaSV(),
                s.getHoTen(),
                s.getDiemAnh(),
                s.getDiemTin(),
                s.getDiemGDTC(),
                s.diemTrungBinh()
            };
            model.addRow(row);
        }
        tbeBang.setModel(model);
    }

    public void nhapThongTin() {
        SinhVien s = new SinhVien();
        s.setMaSV(txtMaSinhVien.getText());
        s.setHoTen(txtHoTen.getText());
        do {
            Float diem = Float.parseFloat(txtTiengAnh.getText());
            if (diem >= 0 && diem <= 10) {
                s.setDiemAnh(diem);
                break;
            } else {
                JOptionPane.showMessageDialog(this, "Điểm phải nằm trong khoảng từ 0 đến 10", "Lỗi", JOptionPane.ERROR_MESSAGE);
                txtTiengAnh.setText("");
            }
        } while (true);
        do {
            Float diem1 = Float.parseFloat(txtTinHoc.getText());
            if (diem1 >= 0 && diem1 <= 10) {
                s.setDiemTin(diem1);
                break;
            } else {
                JOptionPane.showMessageDialog(this, "Điểm phải nằm trong khoảng từ 0 đến 10", "Lỗi", JOptionPane.ERROR_MESSAGE);
                txtTinHoc.setText("");
            }
        } while (true);
        do {
            Float diem2 = Float.parseFloat(txtGiaoDucTC.getText());
            if (diem2 >= 0 && diem2 <= 10) {
                s.setDiemGDTC(diem2);
                break;
            } else {
                JOptionPane.showMessageDialog(this, "Điểm phải nằm trong khoảng từ 0 đến 10", "Lỗi", JOptionPane.ERROR_MESSAGE);
                txtGiaoDucTC.setText("");
            }
        } while (true);
        txtDiemTB.setText(String.valueOf(s.diemTrungBinh()));
        dsSinhVien.add(s);
        ghiFile(dsSinhVien);
        fillToTable();
        JOptionPane.showMessageDialog(this, "Lưu thành công", "Save", INFORMATION_MESSAGE);
    }

    public static void ghiFile(ArrayList<SinhVien> dsSinhVien) {
        String tenFile = "sinh_vien.txt";
        try {
            BufferedWriter writer = new BufferedWriter(new FileWriter(tenFile));
            for (SinhVien s : dsSinhVien) {
                writer.write(s.toString());
                writer.newLine();
            }
            writer.close();
        } catch (IOException e) {
            JOptionPane.showMessageDialog(null, "Lưu tệp thất bại.", "Error", JOptionPane.ERROR_MESSAGE);
        }
    }

    public void Search() {
        String ma = txtMaSVSEARCH.getText();
        boolean found = false;
        for (SinhVien s : dsSinhVien) {
            if (s.getMaSV().equalsIgnoreCase(ma)) {
                txtMaSinhVien.setText(s.getMaSV());
                txtHoTen.setText(s.getHoTen());
                txtTiengAnh.setText(Float.toString(s.getDiemAnh()));
                txtTinHoc.setText(Float.toString(s.getDiemTin()));
                txtGiaoDucTC.setText(Float.toString(s.getDiemGDTC()));
                txtDiemTB.setText(Float.toString(s.diemTrungBinh()));
                found = true;
                break;
            }
        }
        for (int i = 0; i < dsSinhVien.size() - 1; i++) {
            SinhVien sv = dsSinhVien.get(i);
            if (sv.getMaSV().equalsIgnoreCase(ma)) {
                searching = i;
            }
        }
        if (!found) {
            JOptionPane.showMessageDialog(this, "Không tìm thấy sinh viên.", "Error", JOptionPane.ERROR_MESSAGE);
        }
    }

    public void deLete() {
        String ma = txtMaSVSEARCH.getText();
        boolean found = false;
        for (Iterator<SinhVien> iterator = dsSinhVien.iterator(); iterator.hasNext();) {
            SinhVien s = iterator.next();
            if (s.getMaSV().equalsIgnoreCase(ma)) {
                iterator.remove();
                found = true;
                break;
            }
        }
        if (!found) {
            JOptionPane.showMessageDialog(this, "Không tìm thấy sinh viên.", "Error", JOptionPane.ERROR_MESSAGE);
        } else {
            JOptionPane.showMessageDialog(this, "Xoá thành công.", "Thông báo", JOptionPane.INFORMATION_MESSAGE);
        }
        
        fillToTable();
    }

    public void update() {
        String ma = txtMaSVSEARCH.getText();
        boolean found = false;
        for (SinhVien s : dsSinhVien) {
            if (s.getMaSV().equalsIgnoreCase(ma)) {
                s.setMaSV(txtMaSinhVien.getText());
                s.setHoTen(txtHoTen.getText());
                do {
                    Float diem = Float.parseFloat(txtTiengAnh.getText());
                    if (diem >= 0 && diem <= 10) {
                        s.setDiemAnh(diem);
                        break;
                    } else {
                        JOptionPane.showMessageDialog(this, "Điểm phải nằm trong khoảng từ 0 đến 10", "Lỗi", JOptionPane.ERROR_MESSAGE);
                        txtTiengAnh.setText("");
                    }
                } while (true);
                do {
                    Float diem1 = Float.parseFloat(txtTinHoc.getText());
                    if (diem1 >= 0 && diem1 <= 10) {
                        s.setDiemTin(diem1);
                        break;
                    } else {
                        JOptionPane.showMessageDialog(this, "Điểm phải nằm trong khoảng từ 0 đến 10", "Lỗi", JOptionPane.ERROR_MESSAGE);
                        txtTinHoc.setText("");
                    }
                } while (true);
                do {
                    Float diem2 = Float.parseFloat(txtGiaoDucTC.getText());
                    if (diem2 >= 0 && diem2 <= 10) {
                        s.setDiemGDTC(diem2);
                        break;
                    } else {
                        JOptionPane.showMessageDialog(this, "Điểm phải nằm trong khoảng từ 0 đến 10", "Lỗi", JOptionPane.ERROR_MESSAGE);
                        txtGiaoDucTC.setText("");
                    }
                } while (true);
                found = true;
                break;
            }
        }
        if (!found) {
            JOptionPane.showMessageDialog(this, "Không tìm thấy sinh viên.", "Error", JOptionPane.ERROR_MESSAGE);
        } else {
            JOptionPane.showMessageDialog(this, "Cập nhật thành công.", "Thông báo", JOptionPane.INFORMATION_MESSAGE);
        }
        fillToTable();
    }

    private void zzz(int index) {
        SinhVien sv = dsSinhVien.get(index);
        txtMaSinhVien.setText(sv.getMaSV());
        txtHoTen.setText(sv.getHoTen());
        txtTiengAnh.setText(Float.toString(sv.getDiemAnh()));
        txtTinHoc.setText(Float.toString(sv.getDiemTin()));
        txtGiaoDucTC.setText(Float.toString(sv.getDiemGDTC()));
        txtDiemTB.setText(Float.toString(sv.diemTrungBinh()));
    }

    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(QuanLyThongTin.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(QuanLyThongTin.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(QuanLyThongTin.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(QuanLyThongTin.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new QuanLyThongTin().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify                     
    private javax.swing.JButton btnDanhSach;
    private javax.swing.JButton btnDelete;
    private javax.swing.JButton btnLui1;
    private javax.swing.JButton btnLui2;
    private javax.swing.JButton btnNew;
    private javax.swing.JButton btnSave;
    private javax.swing.JButton btnSearch;
    private javax.swing.JButton btnTien1;
    private javax.swing.JButton btnTien2;
    private javax.swing.JButton btnUpdate;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.ButtonGroup buttonGroup2;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JLabel lblGiaoDucTC;
    private javax.swing.JLabel lblHoTen;
    private javax.swing.JLabel lblMaSinhVien;
    private javax.swing.JLabel lblQLDSV;
    private javax.swing.JLabel lblTiengAnh;
    private javax.swing.JLabel lblTinHoc;
    private javax.swing.JTable tbeBang;
    private javax.swing.JTextField txtDiemTB;
    private javax.swing.JTextField txtGiaoDucTC;
    private javax.swing.JTextField txtHoTen;
    private javax.swing.JTextField txtMaSVSEARCH;
    private javax.swing.JTextField txtMaSinhVien;
    private javax.swing.JTextField txtTiengAnh;
    private javax.swing.JTextField txtTinHoc;
    // End of variables declaration                   

}
